import{b as k,u as A,C as n,a as h,N as U,O as x,l as m,H as _,D as L,E as P,o as i,j as r,w as c,F as l,h as s,n as v,v as p,k as f,s as b,z as d,x as F,g as C,G as V,y as $,m as M,t as w}from"./index-c0797ffd.js";const N={props:{token:String},data(){return{v$:k(),toast:A(),showActivationForm:!1,isActiveUser:!1,isLoading:!1,user:{user_id:null,password:null,active:null,confirm_password:null,email_id:null,activation_token:null}}},validations(){return{user:{password:{required:n.withMessage("Password is required",h),minLength:n.withMessage(({$params:t})=>`Password must have a minimum length of ${t.min} characters`,U(6))},confirm_password:{required:n.withMessage("Please confirm your password",h),sameAsPassword:n.withMessage("Passwords does not match",x(this.user.password))}}}},mounted(){this.getUser()},methods:{async getUser(){try{this.isLoading=!0;const t=await m.get("/user/activationdetail/"+this.token);this.user=t.user,this.user&&(this.showActivationForm=!this.user.active,this.isActiveUser=this.user.active??!1)}catch(t){t.status==_.NotFound&&this.$router.push("/"),this.toast.error(t.message)}finally{this.isLoading=!1}},async activateUser(){try{if(this.v$.user.$touch(),!this.v$.user.$invalid){this.isLoading=!0;const t=await m.post("/user/activate",this.user);t.status==_.Ok&&(this.showActivationForm=!1,this.toast.success(t.message),setTimeout(()=>{this.$router.push("/")},3e3))}}catch(t){this.toast.error(t.message)}finally{this.isLoading=!1}}}},q={class:"login-container"},S=s("img",{src:$,alt:""},null,-1),T={class:"login-section h-100 w-100"},B={key:0,class:""},D=s("h6",{class:"text-center"},"Please wait...",-1),j=[D],z=s("h4",{class:"text-center"},"User Activation",-1),E={class:"p-3"},H={class:"row"},O={class:"col-12"},G={class:"form-group"},I=s("label",{for:"password"},"Password",-1),J={class:"col-12"},K={class:"form-group"},Q=s("label",{for:"confirmPassword"},"Confirm Password",-1),R={class:"text-center mt-3"},W={key:2,class:"d-flex flex-column justify-content-center align-items-center align-self-center"},X=s("p",{class:"fs-6"},"User Already Activated",-1),Y={class:"fs-6"};function Z(t,a,ss,es,e,u){const g=P("router-link"),y=M;return i(),r("main",q,[S,c((i(),r("div",T,[!e.showActivationForm&&!e.isActiveUser?(i(),r("div",B,j)):e.showActivationForm&&!e.isActiveUser?(i(),r(l,{key:1},[z,s("form",E,[s("div",H,[s("div",O,[s("div",G,[I,c(s("input",{type:"password","onUpdate:modelValue":a[0]||(a[0]=o=>e.user.password=o),class:v(["form-control",{"is-invalid":e.v$.user.password.$error}]),id:"password"},null,2),[[p,e.user.password]]),(i(!0),r(l,null,f(e.v$.user.password.$errors,o=>(i(),r("div",{class:"invalid-feedback",key:o.$uid},w(o.$message),1))),128))])]),s("div",J,[s("div",K,[Q,c(s("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=o=>e.user.confirm_password=o),class:v(["form-control",{"is-invalid":e.v$.user.confirm_password.$error}]),id:"confirmPassword"},null,2),[[p,e.user.confirm_password]]),(i(!0),r(l,null,f(e.v$.user.confirm_password.$errors,o=>(i(),r("div",{class:"invalid-feedback",key:o.$uid},w(o.$message),1))),128))])])]),s("div",R,[s("button",{class:"btn btn-primary",type:"submit",onClick:a[2]||(a[2]=b((...o)=>u.activateUser&&u.activateUser(...o),["prevent"]))}," Save ")])])],64)):e.showActivationForm&&e.isActiveUser?(i(),r("div",W,[X,s("p",Y,[d("Please "),F(g,{class:"spl-link",to:{path:"/"}},{default:C(()=>[d("Login")]),_:1}),d(" to continue")])])):V("",!0)])),[[y,e.isLoading]])])}const os=L(N,[["render",Z]]);export{os as default};
