import{b as x,u as I,A as U,B as M,C as b,a as f,e as N,l as g,H as L,D as S,E as B,o as n,j as a,w as m,h as t,x as p,z as v,F as r,k as h,G as C,f as F,n as T,v as y,I as K,m as A,t as u,J as D,K as q}from"./index-c0797ffd.js";import{r as Y}from"./bootstrap-vue-next-57b53e13.js";import{f as z}from"./dateFormats-ed53e278.js";const H={data(){return{v$:x(),toast:I(),commonFunctions:U(),formatDate:z,isLoading:!1,isModalLoading:!1,editId:null,editKey:null,editValue:null,modalId:"",tenant:{tenant_id:"",name:"",user_id:"",user_name:"",email_id:"",phone:"",tenant_type_id:"",tenant_status_id:"",description:"",location:""},accountStatus:M,tenantList:[],tenantFields:[{key:"tenant_id",label:"ID"},{key:"name",label:"Tenant",isEditable:!0},{key:"user_name",label:"Primary User Name"},{key:"email_id",label:"Primary User Email"},{key:"active",label:"Active"},{key:"tenant_status_id",label:"Status",isEditable:!0},{key:"last_updated_dt",label:"Last Updated"},{key:"actions",label:"Action"}],dialogParam:{id:0},totalRows:1,currentPage:1,perPage:10}},computed:{filteredTenantList(){const o=(this.currentPage-1)*this.perPage,i=o+this.perPage;return this.tenantList.slice(o,i)}},validations(){return{tenant:{name:{required:b.withMessage("Tenant Name required",f)},user_name:{required:b.withMessage("Primary User Name is required",f)},email_id:{required:b.withMessage("Email ID is required",f),email:b.withMessage("Enter a valid Email ID",N)}}}},mounted(){this.getTenantList()},methods:{async getTenantList(){try{this.isLoading=!0;const o=await g.get("/tenant/list");this.tenantList=o.tenantList,this.totalRows=this.tenantList.length}catch(o){this.toast.error(o.message)}finally{this.isLoading=!1}},async addTenant(){try{if(this.v$.tenant.$touch(),!this.v$.tenant.$invalid){this.isModalLoading=!0;const o=await g.post("/tenant/add",this.tenant);o.status==L.Created&&(this.toast.success(o.message),this.getTenantList(),this.commonFunctions.bsModalHide(this.modalId))}}catch(o){this.toast.error(o.message)}finally{this.isModalLoading=!1}},async updateTenant(o,i,w){try{const _={};_.tenant_id=o.tenant_id,_.name=o.name,_.user_id=o.user_id.toString(),_[i]=w,this.isLoading=!0;const s=await g.patch("/tenant/update",_);s.status==L.Ok&&(this.toast.success(s.message),this.getTenantList(),this.editId=null,this.editKey=null,this.editValue=null)}catch(_){this.toast.error(_.message)}finally{this.isLoading=!1}},handleTableCellClick(o,i){o.isEditable&&(this.editId=i.tenant_id,this.editKey=o.key,this.editValue=i[o.key])},cancelInlineEdit(o,i){o[i.key]=this.editValue,this.editId=null,this.editKey=null,this.editValue=null,this.getTenantList()},deleteTenant:function(o){this.dialogParam.id=o},async onYesTenant(){try{this.isLoading=!0;const o=await g.delete("/tenant/delete/"+this.dialogParam.id);o.status==L.Ok&&(this.toast.success(o.message),this.getTenantList())}catch(o){this.toast.error(o.message)}finally{this.isLoading=!1}}}},O=t("div",{class:"content-card content-header card-gap-mb"},[t("label",null,"Manage Tenant")],-1),R={class:"content-body content-card"},j={class:"row py-2"},G={class:"col text-end"},J={class:"table-responsive"},Q={class:"table table-borderless custom-table-style"},W={class:"table-primary"},X={class:"custom-tbody-style"},Z=["onClick"],$=["onUpdate:modelValue","onKeyup","onBlur"],ee={key:1},te={key:0,class:"text-success"},se={key:1,class:"text-danger"},ne=["onUpdate:modelValue","onChange","onBlur","aria-label"],ae=t("option",{value:null},"Select",-1),oe=["value"],le={key:1},ie=["onClick"],re={key:0},de=t("td",{colspan:"12",class:"text-center"}," No record found ",-1),ce=[de],ue={class:"modal fade",id:"tenantAddEditModal",tabindex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true"},me={class:"modal-dialog"},_e={class:"modal-content"},he=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"modalLabel"},"New Tenant"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ye={class:"modal-body"},pe={class:"container"},ke={class:"form-inline"},be={class:"row"},ge=t("label",{for:"name",class:"col-sm-4 col-form-label"},"Tenant Name",-1),ve={class:"col-sm-8"},Te={class:"row"},fe=t("label",{for:"user_name",class:"col-sm-4 col-form-label"},"Primary User Name",-1),Le={class:"col-sm-8"},we={class:"row"},Ee=t("label",{for:"email_id",class:"col-sm-4 col-form-label"},"Primary User Email",-1),Ce={class:"col-sm-8"},Pe={class:"row"},Ve=t("label",{for:"phone",class:"col-sm-4 col-form-label"},"Phone",-1),xe={class:"col-sm-8"},Ie={class:"row"},Ue=t("label",{for:"location",class:"col-sm-4 col-form-label"},"Location",-1),Me={class:"col-sm-8"},Ne={class:"modal-footer"};function Se(o,i,w,_,s,c){const k=B("font-awesome-icon"),P=Y,V=K,E=A;return n(),a(r,null,[O,m((n(),a("div",R,[t("div",j,[t("div",G,[t("button",{class:"btn btn-primary mx-2",type:"button",onClick:i[0]||(i[0]=e=>{s.commonFunctions.bsModalShow("tenantAddEditModal"),s.modalId="tenantAddEditModal"})},[p(k,{class:"me-2",icon:"fa-solid fa-plus-circle"}),v(" New Tenant ")])])]),t("div",J,[t("table",Q,[t("thead",W,[t("tr",null,[(n(!0),a(r,null,h(s.tenantFields,e=>(n(),a("th",{scope:"col",key:e.key},u(e.label),1))),128))])]),t("tbody",X,[(n(!0),a(r,null,h(c.filteredTenantList,e=>(n(),a("tr",{key:e},[(n(!0),a(r,null,h(s.tenantFields,l=>(n(),a("td",{key:l.key,onClick:d=>c.handleTableCellClick(l,e),class:T({"clickable-cell":l.isEditable})},[l.key=="name"?(n(),a(r,{key:0},[s.editId==e.tenant_id&&s.editKey==l.key?m((n(),a("input",{key:0,type:"text",class:"form-control","onUpdate:modelValue":d=>e[l.key]=d,placeholder:"Enter Name",onKeyup:D(d=>c.updateTenant(e,l.key,e[l.key]),["enter"]),onBlur:d=>c.cancelInlineEdit(e,l.key)},null,40,$)),[[y,e[l.key]]]):(n(),a("div",ee,u(e[l.key]),1))],64)):l.key=="active"?(n(),a(r,{key:1},[e.user[l.key]?(n(),a("div",te,[p(k,{icon:"fa-solid fa-user-check"})])):(n(),a("div",se,[p(k,{icon:"fa-solid fa-user-xmark"})]))],64)):l.key=="tenant_status_id"?(n(),a(r,{key:2},[s.editId==e.tenant_id&&s.editKey==l.key?m((n(),a("select",{key:0,class:"form-select form-control-sm","onUpdate:modelValue":d=>e[l.key]=d,onChange:d=>c.updateTenant(e,l.key,e[l.key]),onBlur:d=>c.cancelInlineEdit(e,l.key),"aria-label":l.label},[ae,(n(!0),a(r,null,h(s.accountStatus,d=>(n(),a("option",{key:d.id,value:d.id},u(d.status),9,oe))),128))],40,ne)),[[q,e[l.key]]]):(n(),a("span",le,u(s.commonFunctions.getTenantStatusById(e[l.key])),1))],64)):l.key=="last_updated_dt"?(n(),a(r,{key:3},[v(u(s.formatDate(e[l.key])),1)],64)):l.key=="actions"?(n(),a("div",{key:4,class:"icon-btn",onClick:d=>c.deleteTenant(e.tenant_id),title:"Delete Tenant","data-bs-toggle":"modal","data-bs-target":"#deleteTenant"},[p(k,{icon:"fa-solid fa-trash"})],8,ie)):l.key=="user_name"||l.key=="email_id"?(n(),a(r,{key:5},[v(u(e.user[l.key]),1)],64)):(n(),a(r,{key:6},[v(u(e[l.key]),1)],64))],10,Z))),128))]))),128)),c.filteredTenantList.length==0?(n(),a("tr",re,ce)):C("",!0)])])]),s.tenantList.length>0?(n(),F(P,{key:0,modelValue:s.currentPage,"onUpdate:modelValue":i[1]||(i[1]=e=>s.currentPage=e),pills:"","total-rows":s.totalRows,"per-page":s.perPage,size:"sm"},null,8,["modelValue","total-rows","per-page"])):C("",!0)])),[[E,s.isLoading]]),t("div",ue,[t("div",me,[m((n(),a("div",_e,[he,t("div",ye,[t("div",pe,[t("form",ke,[t("div",be,[ge,t("div",ve,[m(t("input",{type:"text",class:T(["form-control",{"is-invalid":s.v$.tenant.name.$error}]),"onUpdate:modelValue":i[2]||(i[2]=e=>s.tenant.name=e),id:"name",placeholder:"Enter Tenant Name"},null,2),[[y,s.tenant.name]]),(n(!0),a(r,null,h(s.v$.tenant.name.$errors,e=>(n(),a("div",{class:"invalid-feedback",key:e.$uid},u(e.$message),1))),128))])]),t("div",Te,[fe,t("div",Le,[m(t("input",{type:"text",class:T(["form-control",{"is-invalid":s.v$.tenant.user_name.$error}]),"onUpdate:modelValue":i[3]||(i[3]=e=>s.tenant.user_name=e),id:"user_name",placeholder:"Enter User Name"},null,2),[[y,s.tenant.user_name]]),(n(!0),a(r,null,h(s.v$.tenant.user_name.$errors,e=>(n(),a("div",{class:"invalid-feedback",key:e.$uid},u(e.$message),1))),128))])]),t("div",we,[Ee,t("div",Ce,[m(t("input",{type:"email",class:T(["form-control",{"is-invalid":s.v$.tenant.email_id.$error}]),"onUpdate:modelValue":i[4]||(i[4]=e=>s.tenant.email_id=e),id:"email_id",placeholder:"Enter Email ID"},null,2),[[y,s.tenant.email_id]]),(n(!0),a(r,null,h(s.v$.tenant.email_id.$errors,e=>(n(),a("div",{class:"invalid-feedback",key:e.$uid},u(e.$message),1))),128))])]),t("div",Pe,[Ve,t("div",xe,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":i[5]||(i[5]=e=>s.tenant.phone=e),id:"phone",placeholder:"Enter Phone Number"},null,512),[[y,s.tenant.phone]])])]),t("div",Ie,[Ue,t("div",Me,[m(t("input",{type:"text","onUpdate:modelValue":i[6]||(i[6]=e=>s.tenant.location=e),class:"form-control",id:"location",placeholder:"Enter Location"},null,512),[[y,s.tenant.location]])])])])])]),t("div",Ne,[t("button",{type:"button",onClick:i[7]||(i[7]=(...e)=>c.addTenant&&c.addTenant(...e)),class:"btn btn-primary"},"Save")])])),[[E,s.isModalLoading]])])]),p(V,{id:"deleteTenant",onYes:c.onYesTenant,returnParams:s.dialogParam,title:"Delete Confirmation",message:"Are you sure to delete tenant?"},null,8,["onYes","returnParams"])],64)}const Ae=S(H,[["render",Se]]);export{Ae as default};
